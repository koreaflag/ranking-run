=====================================
RunCrew 프로젝트 현황 보고서
작성일: 2026-02-19
=====================================


[ 1. 현재 빌드 상황 ]

빌드 타입: Release (독립 실행, Metro 서버 불필요)
플랫폼:   iOS (iPhone + Apple Watch)
번들 ID:  app.runcrew / app.runcrew.watchkitapp
빌드 도구: xcodebuild (Xcode 직접 빌드)
상태:     빌드 성공, 디바이스 설치 완료

설치된 디바이스:
  - iPhone (00008130-0011285030E1401C)
  - Apple Watch (00008310-001751C902A0E01E)


-------------------------------------
[ 2. 완성된 기능 (테스트 파일럿 가능) ]
-------------------------------------

[프론트엔드 - 화면]
  v 홈 화면 (추천 코스, 최근 활동)
  v 자유 러닝 화면 (GPS 트래킹, 실시간 거리/페이스/시간)
  v 코스 러닝 화면 (코스 따라가기, 네비게이션, 이탈 감지)
  v 런닝 결과 화면 (경로 지도, 통계 요약)
  v 코스 목록/상세 화면
  v 코스 생성 화면 (런닝 후 코스 등록)
  v 마이페이지 (프로필, 설정)
  v 프로필 편집
  v 다크 모드 지원
  v 카운트다운 (설정 가능)
  v 일시정지/재개/종료

[프론트엔드 - GPS/센서]
  v iOS Core Location (BestForNavigation 최고 정밀도)
  v 6D Kalman Filter (위치+속도 스무딩)
  v 이상치 검출기 (속도/가속도/통계적 필터)
  v 정지 상태 감지 (가속도+속도 퓨전)
  v 자기장 Heading (GPS 코스 없을 때 방위 보정)
  v 기압계 고도 보정
  v 배터리 최적화 (정지 시 저전력 모드)
  v 거리 계산 (Haversine + 누적)
  v 왕복/루프 감지 (300m 이후, 출발점 30m 이내)
  v 미니맵 (실시간 경로, ~200m 줌, 사용자 추적)

[프론트엔드 - Apple Watch]
  v WatchConnectivity 연동
  v Watch 앱 (운동 시작/일시정지/종료)
  v 심박수 모니터링
  v Phone ↔ Watch 실시간 데이터 동기화
  v Watch에서 일시정지/종료 명령

[백엔드 API]
  v 소셜 로그인 (카카오, Apple, Google 토큰 검증)
  v JWT 인증 (access + refresh)
  v 유저 CRUD
  v 코스 CRUD + 검색
  v 런닝 세션 생성/완료
  v 런닝 기록 조회/삭제
  v 랭킹 시스템
  v 리뷰 시스템
  v 팔로우 시스템
  v 이벤트 시스템
  v 히트맵
  v 날씨 API
  v Strava 연동 (OAuth + 활동 가져오기)
  v GPX/FIT 파일 파싱


-------------------------------------
[ 3. 현재 빌드 퀄리티 평가 ]
-------------------------------------

GPS 정확도:        ★★★★☆ (Kalman + 센서 퓨전, 실외 5-10m 오차)
거리 측정:         ★★★★☆ (정지 감지, 노이즈 필터링 적용)
UI/UX:            ★★★★☆ (다크모드, 프리미엄 디자인, 반응형)
안정성:           ★★★☆☆ (실기기 테스트 필요, 크래시 로그 미수집)
백엔드 연동:       ★★☆☆☆ (API 구현완료, 실서버 연결 미완성)
소셜 로그인:       ★★☆☆☆ (백엔드 완료, 프론트 SDK 미연동)
배터리 효율:       ★★★★☆ (정지 시 저전력 전환)

전체 평가: 로컬 기능(GPS, 러닝, UI)은 테스트 파일럿 가능 수준.
          서버 연동 기능(로그인, 코스 공유, 랭킹)은 추가 작업 필요.


-------------------------------------
[ 4. 테스트 파일럿을 위한 우선 확인 항목 ]
-------------------------------------

[야외 테스트 시 확인할 것]
  1. GPS 락 시간 (앱 시작 후 "GPS 준비됨" 까지)
  2. 거리 측정 정확도 (실제 vs 앱 표시, 구글맵 비교)
  3. 페이스/속도 안정성 (급변 없이 부드러운지)
  4. 미니맵 경로 표시 (지그재그 없이 깨끗한지)
  5. 일시정지/재개 후 거리 이어서 측정
  6. 왕복 감지 (300m+ 달린 후 출발점 복귀 시 배너)
  7. Apple Watch 연동 (심박수, 일시정지/종료 명령)
  8. 배터리 소모량 (30분 러닝 기준)
  9. 백그라운드 동작 (화면 꺼도 GPS 계속 기록)
  10. 앱 크래시 여부


-------------------------------------
[ 5. 앞으로 해야 할 일 ]
-------------------------------------

[Phase 1 - 서버 연동 (필수, 테스트 파일럿 전)]
  □ 백엔드 서버 배포 (AWS/GCP)
  □ PostgreSQL + PostGIS DB 셋업
  □ API URL 실서버로 변경
  □ 소셜 로그인 SDK 연동 (카카오/Apple/Google)
    - 프론트엔드 SDK 패키지 설치
    - iOS Info.plist URL 스킴 설정
    - 로그인 화면 버튼 연결
    - API 키 발급 및 설정
  □ 로그인 바이패스 원복 (showAuth = false → 원래 로직)
  □ 런닝 결과 서버 전송 연동
  □ 코스 등록 서버 연동

[Phase 2 - 핵심 기능 완성]
  □ 코스 러닝 시 실제 경로 매칭 검증
  □ 랭킹 시스템 프론트 연동
  □ 코스 검색/필터
  □ 런닝 중 청크 기반 데이터 전송 (1km/5분 단위)
  □ 미전송 청크 자동 복구 (앱 크래시 대비)
  □ 스플릿 자동 기록 (1km 단위)
  □ 코스별 리뷰 작성/조회

[Phase 3 - 품질 강화]
  □ Crashlytics 연동 (크래시 로그 수집)
  □ GPS 후처리 스무딩 (RTS Smoother, 완주 후)
  □ Map Matching (도심 도로 매칭, 서버 사이드)
  □ Android GPS 모듈 개발 (Kotlin, Fused Location)
  □ Android 빌드 및 테스트
  □ TestFlight 배포 설정
  □ 성능 프로파일링 (메모리, 배터리)

[Phase 4 - 서비스 런칭]
  □ App Store 심사 준비
  □ 개인정보 처리방침
  □ 이용약관
  □ 앱 아이콘/스플래시 최종 디자인
  □ 스크린샷/프로모션 텍스트
  □ Google Play 배포 (Android)
  □ 푸시 알림 (FCM)
  □ 관리자 대시보드


-------------------------------------
[ 6. 수정 파일 이력 (최근) ]
-------------------------------------

커밋: bb3612d (2026-02-19)
  - src/screens/running/RunningScreen.tsx (왕복 배너 버그 수정 + 영문화)
  - src/components/map/RouteMapView.tsx (미니맵 줌 ~200m)
  - src/navigation/RootNavigator.tsx (로그인 바이패스)

커밋: 5e8a584 (2026-02-18)
  - ios/RunCrew/GPS/LocationEngine.swift (BestForNavigation, heading)
  - ios/RunCrew/GPS/Filter/KalmanFilter.swift (프로세스 노이즈 튜닝)
  - ios/RunCrew/GPS/Filter/OutlierDetector.swift (정확도 20m)
  - ios/RunCrew/GPS/Filter/StationaryDetector.swift (그레이스 피리어드)
  - ios/RunCrew/GPS/Util/BatteryOptimizer.swift (30초 임계값)
  - backend/app/api/v1/runs.py (DELETE API)
  - backend/app/services/run_service.py (삭제 서비스)
  - src/stores/runningStore.ts (왕복 감지 로직)
  - docs/backend-changes.txt (백엔드 변경사항 문서)

=====================================
